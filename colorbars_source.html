<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/develop/vispy/examples/colorbars.py.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
.Constant { color: #ff6060; }
.Statement { color: #ffff00; }
.Identifier { color: #00ffff; }
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
.Comment { color: #8080ff; }
.PreProc { color: #ff40ff; }
-->
</style>
</head>
<body>
<pre>
<span class="Comment">#!/usr/bin/env python</span>
<span class="Comment">#</span>
<span class="Comment"># Attempt to rebuild: <a href="http://applestooranges.com/blog/post/css-for-bar-graphs/">http://applestooranges.com/blog/post/css-for-bar-graphs/</a></span>
<span class="Comment">#  Vertical CSS Rectangle Graph example</span>
<span class="PreProc">import</span> vp
<span class="PreProc">import</span> sys

data = [
    (&quot;<span class="Constant">Critical</span>&quot;, 22, (0.99, 0.64, 0.67)),
    (&quot;<span class="Constant">High</span>&quot;,     7,  (0.12, 0.80, 0.78)),
    (&quot;<span class="Constant">Medium</span>&quot;,   3,  (0.16, 0.94, 0.76)),
    (&quot;<span class="Constant">Low</span>&quot;,      8,  (0.61, 0.58, 0.70)),
    (&quot;<span class="Constant">Info</span>&quot;,     2,  (0.27, 0.42, 0.51))
]

<span class="Comment"># little helper function</span>
<span class="Statement">def</span> <span class="Identifier">addcolors</span>(col1,col2):
    <span class="Statement">return</span> (col1[0]+col2[0], col1[1]+col2[1], col1[2]+col2[2])

vis        = vp.Graphic()
vis.style  = &quot;<span class="Constant">draw=black,rounded corners=3pt</span>&quot;
vis.width  = 7.5
vis.height = 6

<span class="Comment"># Part1: Draw some ruler lines</span>
riter = vis.add(vp.Iterate(range(5,23,5)))

rule          = riter.add(vp.Line())
rule.position = <span class="Statement">lambda</span>: vp.Position(0, riter.datum() * 0.25)
rule.xshift   = vis.width
rule.style    = &quot;<span class="Constant">draw=black!30</span>&quot;

<span class="Comment"># Part2: draw bar, label on top of the bar and label below the bar for each</span>
<span class="Comment">#        value</span>

iter = vis.add(vp.Iterate(data))
<span class="Comment"># Project values out of the datum for convenience</span>
iter.label = <span class="Statement">lambda</span>: iter.datum()[0]
iter.value = <span class="Statement">lambda</span>: iter.datum()[1]
iter.color = <span class="Statement">lambda</span>: iter.datum()[2]

topcolor       = iter.add(vp.Color())
topcolor.color = iter.color

bottomcolor       = iter.add(vp.Color())
bottomcolor.color = <span class="Statement">lambda</span>: addcolors(iter.color(), (0, 0, +0.15))

bar = iter.add(vp.Rectangle())
bar.position = <span class="Statement">lambda</span>: vp.Position(iter.index() * 1.5 + 0.5, 0)
bar.width    = 0.5
bar.height   = <span class="Statement">lambda</span>: iter.value() * 0.25
bar.style    = <span class="Statement">lambda</span>: &quot;<span class="Constant">shade,shading=axis,top color=%s,bottom color=%s</span>&quot; % (topcolor.name(), bottomcolor.name())

label           = iter.add(vp.Label())
label.label     = iter.value
label.position  = bar.anchors().north
label.style     = &quot;<span class="Constant">text=white</span>&quot;
label.placement = &quot;<span class="Constant">north</span>&quot;

description           = iter.add(vp.Label())
description.label     = iter.label
description.position  = <span class="Statement">lambda</span>: bar.anchors().south().move(0, -0.3)
description.style     = &quot;<span class="Constant">text=black</span>&quot;
description.placement = &quot;<span class="Constant">north</span>&quot;

vis.render(sys.stdout)
</pre>
</body>
</html>
